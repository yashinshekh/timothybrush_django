{% extends 'base.html' %}

{% block content %}
  <div class="max-w-md mx-auto mt-8 p-6 bg-white rounded-md shadow-md">
    <h2 class="text-2xl font-semibold mb-4">Sign Up</h2>

    {% if form.errors %}
      <div class="text-red-500">
        <strong>Oops! There was an error:</strong>
        <ul>
          {% for error in form.errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <form method="post" action="{% url 'signup' %}" id="signupForm">
      {% csrf_token %}

      <div class="mb-4">
        <label for="id_first_name" class="block text-gray-600 text-sm font-medium mb-2">First Name</label>
        {{ form.first_name }}
      </div>

      <div class="mb-4">
        <label for="id_last_name" class="block text-gray-600 text-sm font-medium mb-2">Last Name</label>
        {{ form.last_name }}
      </div>

      <div class="mb-4">
        <label for="id_email" class="block text-gray-600 text-sm font-medium mb-2">Email</label>
        {{ form.email }}
      </div>
{#      <div class="mb-4">#}
{#        <label id="id_password1" name="password1" for="id_password1" class="block text-gray-600 text-sm font-medium mb-2">Password</label>#}
{#        {{ form.password1 }}#}
{#      </div>#}
{##}
{#      <div class="mb-4">#}
{#        <label for="id_password2" class="block text-gray-600 text-sm font-medium mb-2">Confirm Password</label>#}
{#        {{ form.password2 }}#}
{#      </div>#}

      <input type="hidden" id="id_password1" name="password1">

      <div class="mb-4">
        <label for="id_street_address" class="block text-gray-600 text-sm font-medium mb-2">Street Address</label>
        {{ form.street_address }}
      </div>

      <div class="mb-4">
        <label for="id_city" class="block text-gray-600 text-sm font-medium mb-2">City</label>
        {{ form.city }}
      </div>

      <div class="mb-4">
        <label for="id_province_state" class="block text-gray-600 text-sm font-medium mb-2">Province/State</label>
        {{ form.province_state }}
      </div>

      <div class="mb-4">
        <label for="id_postal_code" class="block text-gray-600 text-sm font-medium mb-2">Postal Code</label>
        {{ form.postal_code }}
      </div>

      <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">Sign Up</button>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var form = document.getElementById('signupForm');
      form.addEventListener('submit', function(e) {
        // Prevent the form from submitting immediately
        e.preventDefault();

        var firstName = document.getElementById('id_first_name').value;
        var lastName = document.getElementById('id_last_name').value;
        var email = document.getElementById('id_email').value;
        // Example password generation logic
        var passwordValue = firstName + lastName + email; // Customize this logic as needed

        // Set the password fields
        document.getElementById('id_password1').value = passwordValue;
        {#document.getElementById('id_password2').value = passwordValue;#}

        // Now submit the form programmatically
        form.submit();
      });
    });
  </script>

{% endblock %}




{#{% extends "account/base.html" %}#}
{##}
{#{% load i18n %}#}
{#{% load crispy_forms_tags %}#}
{##}
{#{% block head_title %}#}
{#  {% translate "Signup" %}#}
{#{% endblock head_title %}#}
{#{% block inner %}#}
{#  <h1>{% translate "Sign Up" %}</h1>#}
{#  <p>#}
{#    {% blocktranslate %}Already have an account? Then please <a href="{{ login_url }}">sign in</a>.{% endblocktranslate %}#}
{#  </p>#}
{#  <form class="signup"#}
{#        id="signup_form"#}
{#        method="post"#}
{#        action="{% url 'account_signup' %}">#}
{#    {% csrf_token %}#}
{#    {{ form|crispy }}#}
{#    {% if redirect_field_value %}#}
{#      <input type="hidden"#}
{#             name="{{ redirect_field_name }}"#}
{#             value="{{ redirect_field_value }}" />#}
{#    {% endif %}#}
{#    <button class="btn btn-primary" type="submit">{% translate "Sign Up" %} Â»</button>#}
{#  </form>#}
{#{% endblock inner %}#}
